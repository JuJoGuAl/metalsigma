18-04-2019

* REDISEÑO DE ESTILOS EN COMPARACION A WELLFIT
* FUNCIONES PREVIAS MIGRADAS
* CORREGIDO BODY (COMPARANDO CON WELLFIT)

16-05-2019
DROP TRIGGER IF EXISTS `set_crea_co_planificacion`;CREATE TRIGGER `set_crea_co_planificacion` BEFORE INSERT ON `co_planificacion` FOR EACH ROW BEGIN IF (NEW.crea_user IS NULL || NEW.crea_user='') THEN SET NEW.crea_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF; IF ( (DATE_FORMAT(NEW.finicio,'%H:%i:%s') < '15:00:00') && (DATE_FORMAT(NEW.ffin,'%H:%i:%s') > '12:00:00') ) THEN SET NEW.col = (SELECT valor FROM adm_parametro WHERE cparametro = 20); ELSE SET NEW.col = 0; END IF; END

DROP TRIGGER IF EXISTS `set_mod_co_planificacion`;CREATE TRIGGER `set_mod_co_planificacion` BEFORE UPDATE ON `co_planificacion` FOR EACH ROW BEGIN IF (NEW.mod_user IS NULL || NEW.mod_user='') THEN SET NEW.mod_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF; IF ( (DATE_FORMAT(NEW.finicio,'%H:%i:%s') < '15:00:00') && (DATE_FORMAT(NEW.ffin,'%H:%i:%s') > '12:00:00') ) THEN SET NEW.col = (SELECT valor FROM adm_parametro WHERE cparametro = 20); ELSE SET NEW.col = 0; END IF; END

ALTER TABLE `co_planificacion` ADD `adi` INT(1) NOT NULL DEFAULT '0' AFTER `col`;
ALTER TABLE `co_planificacion` ADD `notas` TEXT NULL AFTER `adi`;
ALTER TABLE `co_planificacion` ADD `col` INT(2) NOT NULL DEFAULT '0' AFTER `ffin`;
ALTER TABLE `co_cotizacion_sub` ADD `notas_user` TEXT NULL AFTER `notas`;
INSERT INTO `adm_menu_sub` (`csubmenu`, `submenu`, `icon`, `crea_user`, `crea_date`, `mod_user`, `mod_date`) VALUES (NULL, 'SERVICIOS', 'fas fa-code-branch', NULL, CURRENT_TIMESTAMP, NULL, NULL);
UPDATE `adm_mod` SET `csubmenu` = '0000000010' WHERE `adm_mod`.`cmodulo` = 0000000021;

ALTER TABLE `nom_trabajadores` ADD `horas` DECIMAL(4,1) NOT NULL DEFAULT '0' AFTER `cespecialidad`;

/*CREE EL MODULO DE REPORTE*/

UPDATE nom_trabajadores SET horas = 42.5;

INSERT INTO `adm_mod` (`cmodulo`, `modulo`, `mod_url`, `mod_icon`, `cmenu`, `csubmenu`, `orden`, `crea_user`, `crea_date`, `mod_user`, `mod_date`) VALUES (NULL, 'COTIZACIONES', 'REP_COTIZACIONES', 'far fa-copy', '0000000007', '0000000003', '1', NULL, CURRENT_TIMESTAMP, NULL, NULL);

* SE PLANIFICA ARRASTRANDO LA ODS QUE POSEE HORAS DISPONIBLES
* SE VERIFICA QUE EL TRABAJADOR Y EL VEHICULO (DE APLICAR) NO ESTEN OCUPADOS EN ESAS HORAS
* SE BLOQUEA PLANIFICACIONES PASADAS.
* EL SISTEMA DETECTA SI UNA PLANIFICACION TOCA EL HORARIO DE COLACION Y DE SER ASI ASIGNA EL TIEMPO DE COLACION, QUE NO SE CONTABILIZA COMO HORA LABORAL.
* ODS EN PLANIFICACION SE MUESTRAN INCLUSIVE SI NO TIENEN HORAS DISPONIBLES

17-05-2019
* SE PLANIFICAN ODS QUE NO POSEEN HORAS Y SON MARCADAS COMO ADICIONALES
* PLANIFICACION TOMA LA CANTIDAD DE HORAS RESTANTE SI ES MENOR A LA JORNADA HACE UN CALCULO, SI NO COLOCA LA JORNADA LABORAL (SEGUN PARAMETROS).
* SE AGREGO UN 3ER CAJON QUE MUESTRA LAS ODS QUE ESTAN PLANIFICADAS.

22-05-2019
* SE MUESTRAN VEHICULOS EN PLANIFICACIONES.
* SE EDITAN PLANIFICACIONES QUE NO SEAN DEL PASADO.
* SE AGREGARON NOTAS A LAS PLANIFICACIONES, PERMITE TENER UNA "OBSERVACION" DE LA MISMA.
* SE MUESTRAN LAS ODS PARA PLANIFICAR Y LAS FACTURAS (EN PESTAÑAS SEPARADAS).
* FILTROS A COTIZACION PRINCIPAL, DEJANDO POR DEFECTO "PENDIENTES".
* SE REDISEÑO EL CRUD PARA EL ESTATUS Y LAS CUENTAS DE LAS COTIZACIONES.
* SE CREO CAMPO PARA LAS NOTAS EN PROCESAR COT / ANULAR / RE COTIZAR.
* FILTRO PARA LAS ODS, COLOCANDO COMO PRINCIPAL APB (APROBADAS POR CLIENTE).
* SE REPARARON REPORTES DE ODS / SUB COT.
* SE CREO REPORTE DE ODC.

23-05-2019
* EDITADA LA CLASE DE CLIENTES, TRABAJADORES, PROVEEDORES.
* DATOS DE CLIENTES, PROVEEDORES, TRABAJADORES SON EDITABLE (EXCEPTO EL RUT).
* METODOLOGIA PARA LA FOTO EDITADA.
* SE CORRIGIO LISTA DE EQUIPOS DE CLIENTE EN COTIZACION (CLIENTE SOLO PUEDE COTIZAR EQUIPOS ACTIVOS).

24-05-2019
* MODULO DE USUARIOS MIGRADO.
* USUARIO NO POSEE FOTO, TOMA LA FOTO DE LA PERSONA CON LA CUAL SE CASA.
* STATUS A USUARIOS SE CAMBIAN "RAPIDAMENTE".
* COPRREGIDO BUG EN PERFIL.
* PERFIL DE USUARIOS CREADO (USUARIO ADMINISTRADOR Y/O USUARIOS SIN TRABAJADORES NO PUEDEN SER EDITADOS)
* CAMBIO DE CONTRASEÑA.
* TRABAJADORES POSEEN UN CAMPO DE HORAS SEMANALES

04-06-2019
* REPORTES DE GRAFICOS LISTOS.
* BUG EN EDITAR PLANIFICACION, EDITAR NO DEJABA GUARDAR POR NEGAR EL TIEMPO DEL TRABAJADOR Y/O VEHICULO
* MODULO DE CONSUMO (SE DEBE MEJORAR PARA TOMAR EL ALMACEN DEL TRABAJADOR LOGUEADO).
* DESCARGABLE DE EXCEL EN PARAMETROS (DEMO PARA ODC Y REQUISICIONES)

05-06-2019
* FILTRO PARA ODS REALIZADO (SE RETIRO DEL SUB).
* SE REPARO BUG EN FILTROS (COT Y ODS) "DATA NO ENCONTRADA"

07-06-2019
* SE MODIFICO EL SCRIPT PARA SUBIR EXCEL MASIVAMENTE (SE TOMA EN CUENTA EL COSTO EN LA MAESTRA DE ARTICULOS), SE TOMA EN CUENTA LA CATEGORIA.
* SE COLOCO EL DESCARGAR EXCEL EN LOS MODULOS (MAESTRAS, ODC, REQUISICION).
* SE REPARA BUG EN LA SUBIDA DE EXCEL CON LA TOMA DE VALORES (NO SE FORMATEAN CIFRAS).

10-06-2019
* SE MODIFICO EL CALCULO DE COTIZACIONES SE HIZO UN SOLO AJAX QUE TRAE LA DATA SE COLOCO UN FORM CHANGE PARA LOS CALCULOS
* MODIFICADA CLASES DE PLANIFICACION / COTIZACION, SE OBTIENE LAS HORAS DE LA SIG FORMA (HRAS TOTALES, HRAS PLANI, HORAS COL, HORAS ADIC, ADIC COL).
* MODIFICADO EL REPORTE DE AVANCE (SE EDITO LA CLASSE).
* MODIFICADO EL REPORTE DE OCUPACION, SE TRAE A TODOS LOS EMPLEADOS Y SOLO CARGA LA OCUPACION DE AQUELLOS QUE ESTAN PLANIFICADOS

11-06-2019
* SE EDITO PLANIFICACION, AHORA EL TRABAJADOR 2 PUEDE SER TECNICO O AYUDANTE (SOLICITUD HECHA POR HEAVYTECH).
* MAESTRAS DE ESPECIALIDADES.
* MAESTRAS DE CARGOS.
* CORREGIDO BUG MENU (SE TOMO LA FUNCION ORIGINAL Y SE LE AGREGO LOS VALORES DEL MENU DINAMICO).
* AGREGADO SCROLL A ODS / FACS EN PLANIFICACION DE ODS (SU TAMAÑO SERA EL DEL CALENDARIO Y LUEGO SE LE AGREGARA UN SCROLL POR EL TAMAÑO).
* SE CREO UNA LISTA DE ARCHIVOS DINAMICOS (JS / CSS / IMGS ), PARA CARGARLOS MEDIANTE PHP UTILIZANDO EL FILETIME, DE TAL MANERA SI ESTE ES CAMBIADO, NO TOMA EL DE CACHE SI NO EL ACTUAL (MUY UTIL PARA LOS ARCHIVOS QUE SE CAMBIAN Y POR CACHEO NO SE CARGAN).

12-06-2019
* SE CREARON PLANES FALSOS A ODS LISTADAS POR HEAVYTECH PARA PODERLAS FACTURAR.

// CAMBIOS EN LA PLANIFICACION
ALTER TABLE `co_planificacion_det` ADD `col` INT(32) NOT NULL DEFAULT '0' AFTER `ctrabajador`;
-- UPDATE co_planificacion_det SET col=30 WHERE cplanificacion IN (1,2,7,8,9,14,15,16,23,24)

DROP TRIGGER IF EXISTS `set_crea_co_planificacion`;CREATE DEFINER=`metalsigmauser`@`localhost` TRIGGER `set_crea_co_planificacion` BEFORE INSERT ON `co_planificacion` FOR EACH ROW BEGIN IF (NEW.crea_user IS NULL || NEW.crea_user='') THEN SET NEW.crea_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF; END
DROP TRIGGER IF EXISTS `set_mod_co_planificacion`;CREATE DEFINER=`metalsigmauser`@`localhost` TRIGGER `set_mod_co_planificacion` BEFORE UPDATE ON `co_planificacion` FOR EACH ROW BEGIN IF (NEW.mod_user IS NULL || NEW.mod_user='') THEN SET NEW.mod_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF; END
DROP TRIGGER IF EXISTS `set_crea_co_planificacion_det`;CREATE DEFINER=`metalsigmauser`@`localhost` TRIGGER `set_crea_co_planificacion_det` BEFORE INSERT ON `co_planificacion_det` FOR EACH ROW BEGIN

DECLARE inicio_ TIME;
DECLARE fin_ TIME;
DECLARE dia_ DATE;
DECLARE col_ INT(3);

SELECT DATE_FORMAT(finicio,'%H:%i:%s'), DATE_FORMAT(ffin,'%H:%i:%s'), DATE_FORMAT(finicio,'%Y-%m-%d') INTO inicio_, fin_, dia_ FROM co_planificacion WHERE cplanificacion = NEW.cplanificacion;

SELECT COUNT(*) AS cuenta INTO col_ FROM co_planificacion_det pd INNER JOIN co_planificacion p USING (cplanificacion) WHERE DATE_FORMAT(p.finicio,'%Y-%m-%d') = dia_ AND pd.ctrabajador = NEW.ctrabajador AND pd.col > 0;

IF (NEW.crea_user IS NULL || NEW.crea_user='') THEN SET NEW.crea_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF;

IF ( (inicio_ < '15:00:00') && (fin_ > '12:00:00') && col_=0 ) THEN
	SET NEW.col = (SELECT valor FROM adm_parametro WHERE cparametro = 20);
ELSE
	SET NEW.col = 0;
END IF;

END
DROP TRIGGER IF EXISTS `set_mod_co_planificacion_det`;CREATE DEFINER=`metalsigmauser`@`localhost` TRIGGER `set_mod_co_planificacion_det` BEFORE UPDATE ON `co_planificacion_det` FOR EACH ROW BEGIN

DECLARE inicio_ TIME;
DECLARE fin_ TIME;
DECLARE dia_ DATE;
DECLARE col_ INT(3);

SELECT DATE_FORMAT(finicio,'%H:%i:%s'), DATE_FORMAT(ffin,'%H:%i:%s'), DATE_FORMAT(finicio,'%Y-%m-%d') INTO inicio_, fin_, dia_ FROM co_planificacion WHERE cplanificacion = NEW.cplanificacion;

SELECT COUNT(*) AS cuenta INTO col_ FROM co_planificacion_det pd INNER JOIN co_planificacion p USING (cplanificacion) WHERE DATE_FORMAT(p.finicio,'%Y-%m-%d') = dia_ AND pd.ctrabajador = NEW.ctrabajador AND pd.col > 0 AND pd.cplanificacion_det!=NEW.cplanificacion_det;

IF (NEW.mod_user IS NULL || NEW.mod_user='') THEN SET NEW.mod_user = UPPER(SUBSTR(USER(), 1,(LOCATE('@', USER())-1))); END IF;

IF ( (inicio_ < '15:00:00') && (fin_ > '12:00:00') && col_=0 ) THEN
	SET NEW.col = (SELECT valor FROM adm_parametro WHERE cparametro = 20);
ELSE
	SET NEW.col = 0;
END IF;
END

//CAMBIOS A COPRAS
ALTER TABLE `com_odc` CHANGE `ch_com` `ods` INT(10) UNSIGNED ZEROFILL NOT NULL DEFAULT '0';

UPDATE `adm_mod` SET `modulo` = 'ODC SIN ODS' WHERE `adm_mod`.`cmodulo` = 0000000012;
INSERT INTO `adm_mod` (`cmodulo`, `modulo`, `mod_url`, `mod_icon`, `cmenu`, `csubmenu`, `orden`, `crea_user`, `crea_date`, `mod_user`, `mod_date`) VALUES (NULL, 'ODC CON ODS', 'CRUD_ODC_ODS', 'fas fa-clipboard-list', '0000000004', '0000000000', '3', NULL, CURRENT_TIMESTAMP, NULL, NULL);

//CAMBIOS A INVENTARIO
ALTER TABLE `inv_almacen` ADD `reserva` INT(1) NOT NULL DEFAULT '0' AFTER `stock`;

14-06-2019
* SE MODIFICO LA PLANIFICACION, LA COLACION SERA POR EMPLEADO, ES DECIR AL PLANIFICAR UNA ODS SI EL EMPLEADO NO HA TOMADO COLACION SE LE ASIGNARA UNA (SI ESTA DENTRO DEL RANGO DE COLACION), DE LO CONTRARIO SERA 0, ASI MISMO SE EVITA REPETIR MULTIPLES COLACIONES EN EL DIA.
* CIERTAS VALIDACIONES DE CONTROL LAS HACE EL CONTROLADOR PARA EVITAR DATA FALSA.
* TANTO EL TRABAJOR 1 COMO EL TRABAJADOR 2 PUEDEN SER TECNICOS Y/O AYUDANTES.
* EDITADA LA CLASS DE PLANIFICACION SE CAMBIARON LOS REGISTROS DE LAS TABLAS.
* PARA CALCULAR LAS HORAS DE LA PLANIFICACION ESTA TOMA LAS HORAS COTIZADAS POR HOMBRES Y LAS COMPARAS CON LAS HORAS HOMBRES PLANIFICADAS.
* VALIDACIONES DE PLANIFICACION SE HACEN EN EL CONTROLADOR SE ELIMINARON DEL AJAX

17-06-2019
* CORREGIDO BUG EN CLASS DE PLANIFICACION (CALCULO DE RESTANTE ERRADO).
* PARA PLANIFICACION SIEMPRE TOMARA COMO HORA DE INICIO LA HORA DE INICIO LABORAL, Y LA HORA FIN DEPENDERA DE LAS HORAS A COTIZAR (SI LAS HORAS A PLANIFICAR SON MAYOR QUE LA JORNADA DIARIA, HACE UN CIERRE A LA HORA FIN LABORAL, DE LO CONTRARIO TOMA LAS HORAS DISPONIBLES).
* SE TOMA EN CUENTA LA CANTIDAD DE HORAS INDIVIDUALES EN LA PLANIFICACION.
* DEPURADO MODULO DE USUARIOS, NO TOMABA EL TRABAJADOR REFERENCIAL.
* CREACION DE EQUIPO A CLIENTE DENTRO DEL MODULO DE COTIZACIONES.

18-06-2019
* EDICION DE FORMULA CALCULO DE COTIZACIONES, CADA ITEM (ART) SE DEBE LISTAR YA CON EL MARGEN SUMADO, Y EL TOTAL SOLO SUMARIA.
* CORRECCION DE BUG EN PLANIFICACION (PARA AQUELLAS QUE SOLO SE USABA UN TRABAJADOR, SE CONDICIONO LA BUSQUEDA DEL 2DO TRABAJADOR).

19-06-2019
* SE DEPURO LA DATA DE LAS COTIZACIONES DE PRODUCCION (SE SUMO EL MARGEN A AQUELLAS COTIZACIONES QUE ESTAN PENDIENTES).
* COMPRAS POR ODS UNA ODC PUEDE LLAMAR UNA ODS Y LISTAR LOS ARTICULOS QUE SE UTILIZARON EN LA MISMA PARA COMPRARLOS.

20-06-2019
* SE ELIMINA LA CATEGORIA SERVICIOS TERCEROS, ESTOS YA NO SERAN CONTROLADOS POR HT SI NO QUE SERAN COTIZADOS POR UN PROVEEDOR.

21-06-2019
* EDITADA LA CLASS DE BD, QUE PERMITE ATRAPAR EL ERROR DE CONEXION Y PASARLO AL CONTROLADOR (PARA NO INTERRUMPIR LA VISTA).

24-06-2019
* EN LA SECCION DE STT EN COTIZACIONES, SE ADJUNTAN COTIZACIONES DE SERVICIOS PREVIAS (SE DEBE DE COTIZAR UN SERVICIO PREVIAMENTE PARA PODER CARGARLO EN LA COTIZACION).
* SE MODIFICO EL CALCULO, LA GESTION DE ALMACENAMIENTO DE LA COTIZACION Y DE LA SECCION SERVICIOS TERCERIZADOS (STT).
* COTIZACION DE SERVICIOS QUE FUE ADJUNTADA EN UNA ODS QUEDA COMO "RESERVADA" EN ESPERA DE PODER SER UTILIZADA O CANCELADA.
* COTIZACION (APROB CLIENTE), MUESTRA RESUMEN DE LO COTIZADO, ELIMINADO TODO INPUT DENTRO DE ESE MODULO, SE MUESTRAN LOS SERVICIOS COTIZADOS PERO NO SE INCLUYE LA COTIZACION DE FORMA GENERAL.
* SI COTIZACION SE CANCELA, LA COTIZACION DE SERVICIO SE CANCELA, SI SE APRUEBA LA COTIZACION DE SERVICIO SE MARCA COMO UTILIZADA
* MODIFICADO EL CRUD DE FACTURACION, ERROR EN EL MODAL AL GUARDAR NO SE CERRABA.
* CREADO DIRECTORIO EN GIT.
* CREADO TRIGGER PARA LAS ODC (SI UNA COTIZACION ES UTILIZADA, Y ESTA NO HA SIDO GENERADA, SE CREA UNA ODC PARA LA GESTION).
* CRUD DE COMPRAS POR COTIZACIONES LISTOS.
* USUARIOS DEL SISTEMA SE ENLAZAN CON UNO O VARIOS ALMACENES, DE TAL MANERA SOLO PODRAN REQUERIR PARA SUS ALMACENES Y CONSUMIR DE LOS MISMOS.

28-06-2019
* TABLAS DE REQUISICIONES.
* CLASSE PARA LAS REQUISICIONES.

01-07-2019
* USUARIOS REALIZAN REQUISICIONES A UN ALMACEN DE COMPRA
* ALMACEN DE COMPRA RECIBE CADA COTIZACION Y DESPACHA (LA CANT REQUIRIDA O MENOS, NUNCA MAS).

02-07-2019
* TABLA DE RESERVAS
* CLASS PARA LAS RESERVAS

05-07-2019
* SE CREO EL MODULO DE RESERVAS, SE PUEDE RESERVAR UN ARTICULO A UNA COTIZACION, SI SE RESERVA POR 2DA VEZ ESTA SUSTITUIRA LA ANTERIOR.
* SE MODIFICO LA TABLA DE EQUIPOS POR CLIENTE EN LA COTIZACION, SI EL CLIENTE NO TIENE EQUIPOS, IGUALMENTE SE MUESTRA LA TABLA
* MODIFICADO LAS ODC CON ODS MUESTRA LA CANTIDAD DE INVENTARIO RESTANDO LO RESERVADO.
* MODIFICADO KARDEX AJUSTANDO LA CONSULTA Y MOSTRANDO LOS ART A TRAVEZ DE UN MODAL
* CORREGIDO BUG EN REQUISICIONES, SE PUEDEN SOLICITAR REQUISICIONES A CUALQUIER ALMACEN DE COMPRA

08-07-2019
* SE CREO TRIGGER PARA LOS CONSUMOS (SI POSEEN RESERVAS BAJA LA RESERVA)
* SE CREAN CONSUMOS Y ESTOS SE DESCUENTAN DE LA ODS.
* SE CAMBIARON LOS CAMPOS DE ALMACEN POR SELECTS PARA FACILITAR EL ALMACEN POR DEFECTO

09-07-2019
* FIX EN ALMACEN
* FIX EN TRANSFERENCIAS
* FIX EN USUARIOS PARA EVITAR EL MENSAJE DE DUPLICADO
* SE FORMATEO RUT EN LAS MAESTRAS, INVENTARIO, COMPRAS Y COTIZACIONES.
/////////////////////////////////////////
25-07-2019
* CLASS DE PLANIFICACION CAMBIADA, LAS PLANIFICACIONES SON EDITADAS, CUANDO SE EDITA UNA PLANIFICACION A LAS HORAS DISPONIBLES DE LA ODS SE LE SUMA LA DE LA PLANIFICACION PARA EVITAR EL MENSAJE (ODS SIN TIEMPO DISPONIBLE).
* SE CREO UNA CONSTANTE PARA DEFINIR EL NUMERO DE "0" QUE TENDRAN LOS LPAD PARA AUTOCOMPLETAR LOS CAMPOS.
* SE ELIMINO CAMPOS REPETIDOS.
* SE AGREGARON AUDITORIAS.
* SE COLOCO UN STATUS A LAS PLANIICACIONES, DE TAL MODO LAS INACTIVAS NO FUNCIONAN (PERO NO SE BORRAN POR GUARDAR LOG)

ALTER TABLE `co_planificacion` ADD `status` INT(1) NOT NULL DEFAULT '1' AFTER `notas`;

29-07-2019
* SE AGREGO ODS A LA REQUISICION, DE TAL MANERA QUE FACILITA LA SELECCION DE ARTICULOS AL MOMENTO DE REQUERIR.

16-08-2019
* SE PERMITE ELIMINAR DETALLES DE LAS COMPRAS POR ODS, PARA QUE EL USUARIO PUEDA DESIGNAR QUE RENGLONES DE LA ODS DICTARA LA ORDEN DE COMPRA.
* SE ACTUALIZO LA LIBRERIA MOMMENT, Y SE ELIMINO EL LOCALE ES, PARA PREVENIR LOS WARNING, Y CONSEGUIR MEJORIAS
* ACTUALIZADO EL AJAX DE LOS CALCULOS, EL AJAX SOLO SE DISPARA SI SE CAMBIAN LOS CAMPOS (LUGAR, VEHICULO, PARTE, EQUIPO DE TRABAJO), ADICIONALMENTE EL AJAX SE DISPARA AL CARGAR LA COTIZACION (SI ES CALCULABLE).
* SE EDITO LA FUNCION DE CALCULO PARA QUE SIEMPRE MUESTRE LAS SUMAS DE LAS HORAS EJECUTADAS EN TALLER Y TERRENO Y LAS FECHA DE INICIO Y FIN EN LAS COTIZACIONES INCLUSO SI ESTAN CERRADAS.
* FIX EN RESILTADOS EN COTIZACIONES DE CLIENTES.
* ACTUALIZADO PLUGIN DE PERFECT SCROLL POR ERRORES EN EL DRAG.
* FIX EN HEIGHT DE LISTADO DE ODS (SE COLOCO EL TAMAÑO DEL CALENDARIO PARA OBTENER OBJETOS DEL MISMO ALTO)
* SE ELIMINARON LAS ODS FACTURADAS DEL CALENDARIO (LISTADO), ASI SOLO SE MUESTRAN LAS ODS.
* SE RE-HIZO LA ASSIGNACION DE COLORES A LA PLANIFICACION, ODS QUE ESTE LISTADA EN NEGRO, IMPLICA QUE SE PLANIFICO Y FUE FACTURADA (YA NO ES ODS).

17-08-2019
* ACTUALIZADO DIRECTORIO GIT.

29-08-2019
* RE DISEÑO DE PLANIFICACION.
* PLANIFICACION UTILIZA PARAMETROS PARA ARMAR EL CALENDARIO, ASI MISMO PARA VALIDAR LOS DIAS PASADOS PERMITIDOS.
* CAMBIOS GENERALES EN PLANIFICACION

02-09-2019
* COMPRAS POR ODS TRAEN EN EL DETALLE INFORMACION DE COMPRAS ANTERIORES DEL MISMO ARTICULO EN LA MISMA ODS (ALERTANDO SI YA REALIZARON UNA ODC PARA EL RENGLON).
* FIX: COT Y ODS EN COMPRAS (MUESTRA LA COT Y LA ODS DE LA COMPRA QUE VIENE DE UNA COTIZACION DE SERVICIO)
* FIX: COTIZACION DE COMPRAS, MUESTRA COT Y ODS DE COTIZACION SI FUE UTILIZADA O RESERVADA, AYUDA AL CLIENTE A UBICAR LAS ODS.
* UPDATE: FORMULA CALCULOS (COTIZACIONES), CHEQUEA EL TIPO DE COTIZACION, PARA CREAR LAS GARANTIAS Y LLEVAR TODO A 0

03-09-2019
ALTER TABLE `co_cotizacion_sub` ADD `corigen_gar` INT UNSIGNED ZEROFILL NOT NULL DEFAULT '' AFTER `archivo`, ADD INDEX (`corigen_gar`);
INSERT INTO `adm_parametro` (`cparametro`, `parametro`, `valor`, `block`, `crea_user`, `crea_date`, `mod_user`, `mod_date`) VALUES (NULL, 'MAX_GAR', '3', '0', NULL, CURRENT_TIMESTAMP, NULL, NULL), (NULL, 'MAX_DIAS_GAR', '365', '0', NULL, CURRENT_TIMESTAMP, NULL, NULL);

04-09-2019
* EN ODS NO SE MUESTRAN COT FACTURADAS.
* GARANTIAS SE MUESTRAN EN AMARILLO PARA LOS CLIENTES QUE POSEEN UNA GARANTIA PENDIENTE EN EL MODDULO, PARA EL SUB MODULO MUESTRA UNA BANDA CON LA PALABRA "URGENTE".
* FIX PERFECT SCROLLBAR PARA LAS PLANIFICACIONES (SE ACTUALIZO EL PLUGIN).

05-09-2019
* ODS SE MUESTRAN DE MAYOR A MENOR (SEGUN FECHA DE MODIFICACION).
* SE QUITAN LAS HORAS TOTALES COTIZADAS, SOLO SE MUESTRAN LAS DISPONIBLES.
* SE MUESTRA UN % DEL AVANCE.
* FIX CLASS DE PLANIFICACION PARA REPORTE

06-09-2019
* GARANTIAS TRAEN TRABAJOS A LA COTIZACION.
* FIX EN LA FUNCION DE FECHAS.
* ADD GARANTIAS EN ODS.
* ADD GARANTIAS EN FACTURACION.
* UPT ACTUALIZADA LA INTERFAZ DE FACTURACION.
* ADD FACTURACION POSE GARANTIAS.
* ADD FILTROS DE BUSQUEDA EN FACTURACION.

09-09-2019
* FIX EN LISTA DE REPUESTOS E INSUMOS EN ODS/COT (REPORES Y OTROS MODULOS), SOLO EN EL CRUD DE COTIZACION SE MUESTRAN LOS ELIMINADOS.
* CREADOS CAMPOS EN BD PARA COTIZACION:
ALTER TABLE `co_cotizacion_sub`
ADD `hh_taller` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `m_bruto`,
ADD `hh_terreno` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `hh_taller`,
ADD `trabs` INT (1) NOT NULL DEFAULT '0' AFTER `hh_terreno`,
ADD `valor_dia` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `trabs`,
ADD `valor_misc` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `valor_dia`,
ADD `pag_gasto` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `valor_misc`,
ADD `pag_marg` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `pag_gasto`,
ADD `mar_ins` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `pag_marg`,
ADD `mar_rep` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `mar_ins`,
ADD `mar_stt` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `mar_rep`,
ADD `sal` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `mar_stt`,
ADD `costo_km` DECIMAL (12,2) NOT NULL DEFAULT '0' AFTER `sal`;

11-09-2019
* SE AGREGAN A LA TABLA DE COTIZACIONES LOS VALORES UTILIZADOS PARA LOS CALCULOS
* SE MODIFICA LA FORMULA DE CALCULOS EN JS Y SE CREA UNA EN PHP.
* SE CREA UN REDONDEO EN JS Y PHP PARA LA LEY CHILENA.
* SE COLOCAN ALERTAS DE CAMBIOS REALIZADOS EN LOS CALCULOS, PARA CUANDO LA COTIZACION CAMBIA EN MONTOS IGUAL SEA NOTIFICADO.

12-09-2019
* MODIFICADAS INTERFAZ DE COTIZACION.
* MODIFICADA LA INTERFAZ DE ODS Y FACTURACION

30-09-2019
* CAMBIADA LA CLASE DE PARAMETROS.
* CAMBIOS EN LA SELECCION DE PARAMETROS, TODOS LOS PARAMETROS SON LLAMADOS DESDE SU CONSTANTE DEFINIDA.

03-10-2019
* INVENTARIO -> RECEP. GUIA DESP: LISTADO DE PROVEEDORES SOLO TRAE PROVEEDORES CON ODC DE ART PENDIENTES (POR RECIBIR), ASI MISMO CUANDO SE SELECCIONA UN PROVEEDOR MUESTRA LAS ODC PENDIENTES DEL MISMO.
* GENERAL: CAMBIO EN EL LISTENER DE BOTONES PARA QUE SOLO ESCUCHE BOTONES ESPECIFICOS Y NO TODOS (CREE UN CONFLICTO ENTRE INVENTARIO Y COTIZACION).
* INVENTARIO -> CRUD: ORDENADOS DE MAYOR A MENOR TODOS LOS CRUDS.
* GENERAL: DATATABLE ORDENA DE FORMA DESCENDIENTE EL PRIMER CAMPO AL MENOS QUE SE ESPECIFIQUE UN ORDENAMIENTO.

04-10-2019
* INVENTARIO -> FACTURA: LISTADO DE PROVEEDORES CON ODC CON PENDIENTES O NTE SIN RECEPCIONAR.
* GENERAL: CAMBIO DE LISTENER DE BOTON DE MODAL Y COTIZACIONES.
